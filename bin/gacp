#!/bin/bash

# gacp : git add + git commit + git push
# le tout en une commande avec message de commit personnalisé

# Option : arrêter le script en cas d'erreur
set -e

# Vérifier si un message de commit a été fourni
if [ -z "$1" ]; then
  echo "Aucun message de commit n'a été fourni."
  echo "Usage : gacp 'message de commit'"
  exit 1
fi

# Ajouter tous les fichiers modifiés
git add .
echo

# Affiche le status avant de commit
git status -s
echo

# Effectuer le commit avec le message personnalisé
git commit -m "$*"
echo

# Pusher les modifications sur le dépôt distant
git push
echo

# Afficher les détails du dernier commit
git --no-pager log -1
